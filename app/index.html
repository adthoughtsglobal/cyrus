<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyrus</title>
    <link rel="stylesheet" href="styles.css">
    <script src="../scripts/reqs.js"></script>
    <script src="../scripts/peerConfig.js"></script>
    <script defer src="../scripts/connections.js"></script>
    <link rel="preload" href="../assets/icons.woff2" as="font" type="font/woff2" crossorigin>
</head>

<body>
    <div class="window">
        <div class="nav">
            <div class="main_logo">
                <img src="../assets/CYRUSpng.png" alt="Cyrus"> <span>Server Dashboard</span>
            </div>
            <div class="pages_nav">
                <div class="nav_hl"></div>

                <div class="btn active" clickTgt="connections">
                    <div class="icn">devices</div>
                    <div class="title">Connections</div>
                </div>
                <div class="btn" clickTgt="files">
                    <div class="icn">folder</div>
                    <div class="title">Files</div>
                </div>
                <div class="btn" clickTgt="hub">
                    <div class="icn">network_node</div>
                    <div class="title">Hub</div>
                </div>
                <div class="btn" clickTgt="lists">
                    <div class="icn">shield_lock</div>
                    <div class="title">Lists</div>
                </div>
                <div class="btn" clickTgt="lists">
                    <div class="icn">settings</div>
                    <div class="title">Settings</div>
                </div>
            </div>

        </div>
        <div class="pages">
            <div class="page active" id="connections">
                <div class="pane large">
                    <div class="white pane horiz thin">
                        <div class="btn">
                            <div class="icn">sports_martial_arts</div>
                            <div class="title">Kick all</div>
                        </div>
                        <div class="btn">
                            <div class="icn">refresh</div>
                            <div class="title">Refresh</div>
                        </div>
                        <div class="seperator"></div>
                        <div class="btn worth" id="new_cl_btn">
                            <div class="icn" id="new_cl_addbtn">add</div>
                            <div class="title">New client</div>
                        </div>
                    </div>
                    <div class="white pane horiz visibility" id="newClInstrPan">
                        <div class="instr">
                            <div style="margin-bottom: .5em;">Scan the QR or use string for manual setup</div>
                            <div class="label">Manual setup string:</div>
                            <div class="inpgrp" id="token_grp">
                                <input type="text" placeholder="loading..." disabled id="manual_token_input"
                                    value="ABC123">
                                <button tooltip="copy" class="icn btn" type="button">content_copy</button>
                            </div>

                            <script>
                                const grp = document.getElementById('token_grp')
                                const inp = document.getElementById('manual_token_input')

                                grp.addEventListener('click', () => {
                                    if (!inp.value) return
                                    const x = inp.value
                                    navigator.clipboard.writeText(x)
                                    inp.value = "Copied!"
                                    setTimeout(() => {
                                        inp.value = x
                                    }, 1000)
                                })

                            </script>

                        </div>
                        <div class="seperator"></div>
                        <div id="qrScannable"></div>

                    </div>
                    <div class="large white pane">
                        <table id="connections_table">
                            <tr>
                                <th>ID</th>
                                <th>Nickname</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>

                        </table>
                    </div>
                </div>
                <div class="pane">
                    <div class="white pane" id="progressPane">
                        <div class="label" id="progressLabel"></div>
                        <div class="progressCont">
                            <div class="progressBar"></div>
                        </div>
                    </div>
                    <div class="white pane large">
                        <div class="label">Stats</div>
                        <h1 id="connected_number">0</h1>
                        <s1 class="subheading">Clients connected</s1>
                    </div>
                </div>
            </div>
            <div class="page" id="files">
                <div class="pane large">
                    <div class="white pane horiz thin">
                        <div class="btn" onclick="renderFilesList()">
                            <div class="icn">refresh</div>
                            <div class="title">Refresh</div>
                        </div>
                        <div id="fileActionBtns" class="horiz"></div>
                        <div class="seperator"></div>
                        <div class="btn worth" id="new_fl_btn">
                            <div class="icn" id="new_fl_addbtn">add</div>
                            <div class="title">Upload file</div>
                        </div>
                    </div>
                    <div class="large white pane">
                        <table id="files_table">
                            <tr>
                                <th>
                                    <input type="checkbox" id="selectAll" tooltip="Select All">
                                </th>
                                <th>File Name</th>
                                <th>Modified</th>
                                <th>Size</th>
                                <th>ID</th>
                            </tr>

                        </table>
                    </div>
                </div>
                <div class="pane">
                    <div class="white pane large">
                        <div class="label">Total Memory Used:</div>
                        <h1 id="total_mem_used">100GB</h1>
                    </div>
                </div>
            </div>

            <div class="white pane" id="confirmElement">
                <span>Allow this to do that?</span>
                <div class="btngrp">
                    <div class="btn" style="background-color: #4cae56;">
                        <div class="icn">check</div>
                        <div class="title">Allow</div>
                    </div>
                    <div class="btn red" style="background-color: #6e2f2f;">
                        <div class="icn">close</div>
                        <div class="title">Cancel</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="toast-container"
        style="position: fixed; bottom: 3em; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column-reverse; gap: 0.5em; pointer-events: none;">
    </div>

    <script src="appScripts/utility.js" defer></script>
    <script src="script.js" defer></script>
    <script src="appScripts/sharing.js" defer></script>
</body>

</html>